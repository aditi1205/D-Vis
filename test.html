<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test.html</title>
</head>

<body>
    <model-viewer id="lantern" camera-controls
        src="shared-assets/models/glTF-Sample-Models/2.0/DamagedHelmet/glTF-Binary/DamagedHelmet.glb" ar
        ar-modes="webxr scene-viewer quick-look" alt="A 3D model of a helmet">
        <div class="controls">
            <div>
                <p>Diffuse</p>
                <select id="diffuse">
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/DamagedHelmet/glTF/Default_albedo.jpg">
                        Damaged helmet</option>
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/Lantern/glTF/Lantern_baseColor.png">
                        Lantern Pole</option>
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/WaterBottle/glTF/WaterBottle_baseColor.png">
                        Water Bottle</option>
                </select>
            </div>
            <div>
                <p>Metallic-roughness</p>
                <select id="metallicRoughness">
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/DamagedHelmet/glTF/Default_metalRoughness.jpg">
                        Damaged helmet</option>
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/Lantern/glTF/Lantern_roughnessMetallic.png">
                        Lantern Pole</option>
                    <option
                        value="../../shared-assets/models/glTF-Sample-Models/2.0/WaterBottle/glTF/WaterBottle_occlusionRoughnessMetallic.png">
                        Water Bottle</option>
                </select>
            </div>
        </div>
    </model-viewer>

    <!-------------------- SCRIPTS ----------------->
    <script type="module" src="https://unpkg.com/@google/model-viewer@0.3.1/dist/model-viewer.js">
    </script>

    <script nomodule src="https://unpkg.com/@google/model-viewer@0.3.1/dist/model-viewer-legacy.js">
    </script>

    <script>
        const modelViewerTexture = document.querySelector("model-viewer#lantern");

        modelViewerTexture.addEventListener("load", (ev) => {

            let material = modelViewerTexture.model.materials[0];

            let applyPBRTexture = (channel, event) => {
                material.pbrMetallicRoughness[channel].texture.source.setURI(event.target.value);
            }

            document.querySelector('#diffuse').addEventListener('input', (event) => {
                applyPBRTexture('baseColorTexture', event);
            });

            document.querySelector('#metallicRoughness').addEventListener('input', (event) => {
                applyPBRTexture('metallicRoughnessTexture', event);
            });
        })

    </script>

</body>

</html>